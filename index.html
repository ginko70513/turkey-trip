<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3/12-3/20 åœŸè€³å…¶å°ˆå±¬è¡Œç¨‹èˆ‡è³¼ç‰©å°èˆª</title>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#319795">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="åœŸè€³å…¶ä¹‹æ—…">
    <link rel="apple-touch-icon" href="icon-192.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F8FAF5;
            color: #2D3748;
            font-size: 17px;
        }
        .chart-wrapper {
            position: relative;
            width: 100%;
            height: 250px;
            max-height: 300px;
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .active-tab {
            background-color: #319795;
            color: white;
            border-color: #319795;
            transform: scale(1.05);
        }
        .inactive-tab {
            background-color: white;
            color: #718096;
            border-color: #E2E8F0;
        }
        /* Brand colors for store cards */
        .brand-migros { border-left: 4px solid #FF6600; }
        .brand-sok { border-left: 4px solid #FFD700; }
        .brand-a101 { border-left: 4px solid #1E40AF; }
        .brand-gratis { border-left: 4px solid #EC4899; }
        .brand-watsons { border-left: 4px solid #2563EB; }
        .brand-eczane { border-left: 4px solid #DC2626; }
        .brand-tag-migros { background-color: #FFF7ED; color: #C2410C; border-color: #FB923C; }
        .brand-tag-sok { background-color: #FEFCE8; color: #A16207; border-color: #FACC15; }
        .brand-tag-a101 { background-color: #EFF6FF; color: #1E40AF; border-color: #60A5FA; }
        .brand-tag-gratis { background-color: #FDF2F8; color: #BE185D; border-color: #F472B6; }
        .brand-tag-watsons { background-color: #EFF6FF; color: #1D4ED8; border-color: #3B82F6; }
        .brand-tag-eczane { background-color: #FEF2F2; color: #DC2626; border-color: #F87171; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navbar -->
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-50 px-4 py-2 shadow-sm">
        <div class="flex justify-between items-center">
            <div>
                <h1 class="text-lg font-bold text-teal-700 tracking-wide">ğŸ‡¹ğŸ‡· åœŸè€³å…¶ä¹‹æ—… (3/12-3/20)</h1>
                <p class="text-xs text-gray-500">æ‚¨çš„æ¯æ—¥é£¯åº—èˆ‡è³¼ç‰©æ”»ç•¥</p>
            </div>
            <button onclick="document.getElementById('global-tips').scrollIntoView({behavior: 'smooth'})" class="text-sm bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-medium">
                ğŸ’¡ å¿…è®€æ”»ç•¥
            </button>
        </div>
        <!-- Dual Clock -->
        <div class="flex justify-center gap-4 mt-1 text-xs">
            <div class="flex items-center gap-1 bg-gray-50 px-2 py-0.5 rounded">
                <span>ğŸ‡¹ğŸ‡¼</span>
                <span class="text-gray-500">å°ç£</span>
                <span id="clock-tw" class="font-mono font-bold text-gray-700">--:--</span>
            </div>
            <div class="flex items-center gap-1 bg-teal-50 px-2 py-0.5 rounded">
                <span>ğŸ‡¹ğŸ‡·</span>
                <span class="text-teal-600">åœŸè€³å…¶</span>
                <span id="clock-tr" class="font-mono font-bold text-teal-700">--:--</span>
            </div>
            <div class="text-gray-400 flex items-center">æ™‚å·® -5hr</div>
        </div>
    </nav>

    <!-- Timeline Navigation (Scrollable) -->
    <div class="bg-gray-50 py-4 shadow-inner">
        <div class="container mx-auto px-4">
            <h2 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">é¸æ“‡æ—¥æœŸ / è¡Œç¨‹</h2>
            <div id="timeline" class="flex overflow-x-auto space-x-3 pb-2 no-scrollbar snap-x">
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto px-4 py-6 max-w-5xl">

        <!-- Intro & Hotel Context -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Left: Location & Hotel Info -->
            <div class="md:col-span-1">
                <div class="bg-white rounded-xl card-shadow p-5 border-l-4 border-teal-500 h-full flex flex-col justify-between">
                    <div>
                        <span id="day-badge" class="inline-block bg-teal-100 text-teal-800 text-xs px-2 py-1 rounded font-bold mb-2">DAY 1</span>
                        <h2 id="location-title" class="text-2xl font-bold text-gray-800 mb-1">Taipei -> Istanbul</h2>
                        <div class="flex items-center text-gray-600 mt-2">
                            <span class="text-xl mr-2">ğŸ¨</span>
                            <div>
                                <p class="text-xs text-gray-400 uppercase">Tonight's Hotel</p>
                                <p id="hotel-name" class="font-bold text-lg leading-tight">é£›æ©Ÿä¸Š / æ©Ÿå ´</p>
                            </div>
                        </div>
                    </div>
                    <div id="hotel-note" class="mt-4 text-sm text-gray-500 bg-gray-50 p-2 rounded">
                        æº–å‚™å‡ºç™¼ï¼ä»Šæ—¥é‡é»æ˜¯æ©Ÿå ´å…ç¨…åº—èˆ‡ä¼‘æ¯ã€‚
                    </div>
                    <!-- Weather Widget -->
                    <div id="weather-box" class="mt-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg p-3 border border-blue-100 hidden">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <span id="weather-icon" class="text-2xl">ğŸŒ¤</span>
                                <div>
                                    <p class="text-xs text-gray-400">ç•¶åœ°å¤©æ°£</p>
                                    <p id="weather-temp" class="text-lg font-bold text-gray-700">--Â°C</p>
                                </div>
                            </div>
                            <div class="text-right text-xs text-gray-500">
                                <p id="weather-desc">è¼‰å…¥ä¸­...</p>
                                <p id="weather-detail"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right: Daily Briefing -->
            <div class="md:col-span-2 bg-white rounded-xl card-shadow p-6">
                <h3 class="font-bold text-gray-700 mb-2 flex items-center">
                    <span class="bg-orange-100 text-orange-600 rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2">!</span>
                    ä»Šæ—¥è³¼ç‰©é‡é»
                </h3>
                <p id="daily-summary" class="text-gray-600 text-sm leading-relaxed mb-4">
                    ä»Šå¤©åœ¨é£›æ©Ÿä¸Šï¼Œå»ºè­°æ‚¨å¯ä»¥ç€è¦½æ©Ÿä¸Šå…ç¨…å•†å“ï¼Œæˆ–æ˜¯åœ¨è½‰æ©Ÿæ™‚è³¼è²·ä¸€äº›ç°¡å–®çš„é›¶é£Ÿã€‚æŠµé”åœŸè€³å…¶å¾Œï¼Œè«‹å¤šåˆ©ç”¨ä¼‘æ¯æ™‚é–“èª¿æ•´æ™‚å·®ã€‚
                </p>

                <!-- Visualization Area -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="bg-gray-50 rounded-lg p-3 border border-gray-100">
                        <h4 class="text-xs font-bold text-gray-500 mb-2 text-center">èµ°è·¯å»è²·è¦å¤šä¹…ï¼Ÿ(åˆ†é˜)</h4>
                        <div class="chart-wrapper" style="height: 180px;">
                            <canvas id="distanceChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-3 border border-gray-100">
                        <h4 class="text-xs font-bold text-gray-500 mb-2 text-center">é€™è£¡è²·ä»€éº¼æœ€åˆ’ç®—ï¼Ÿ</h4>
                        <div class="chart-wrapper" style="height: 180px;">
                            <canvas id="typeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Daily Map Preview -->
        <section class="mb-8">
            <h3 class="text-xl font-bold text-gray-800 mb-3">ğŸ“ ä»Šæ—¥åœ°åœ–ç¸½è¦½</h3>
            <div id="daily-map" style="height: 300px; border-radius: 12px; z-index: 1;" class="card-shadow border border-gray-200"></div>
        </section>

        <!-- Detailed Shopping Spots List -->
        <section>
            <div class="flex justify-between items-end mb-4">
                <h3 class="text-xl font-bold text-gray-800">å‘¨é‚Šæ¨è–¦èˆ‡å°èˆª</h3>
            </div>
            <div id="spots-container" class="space-y-4">
            </div>
        </section>

        <!-- Global Tips Section -->
        <section id="global-tips" class="mt-12 bg-teal-800 text-teal-50 rounded-2xl p-8 shadow-lg">
            <h2 class="text-2xl font-bold mb-6 text-center text-white">ğŸ‡¹ğŸ‡· åœŸè€³å…¶è³¼ç‰©ç”Ÿå­˜æ³•å‰‡</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-teal-700 bg-opacity-50 p-4 rounded-lg">
                    <div class="text-3xl mb-2">ğŸ›’</div>
                    <h3 class="font-bold text-white mb-1">èªæ˜å¹³åƒ¹è¶…å¸‚</h3>
                    <p class="text-sm text-teal-100">æƒ³è²·æ°´ã€é¤…ä¹¾ã€ç´…èŒ¶åŒ…ï¼Ÿè«‹åœ¨ Google Map æœå°‹ <strong>"BIM"</strong>, <strong>"A101"</strong> æˆ– <strong>"Migros Jet"</strong>ã€‚åƒ¹æ ¼æ˜¯è§€å…‰å€å•†åº—çš„ä¸€åŠã€‚</p>
                </div>
                <div class="bg-teal-700 bg-opacity-50 p-4 rounded-lg">
                    <div class="text-3xl mb-2">ğŸ§¶</div>
                    <h3 class="font-bold text-white mb-1">æ®ºåƒ¹çš„è—è¡“</h3>
                    <p class="text-sm text-teal-100">åœ¨ç•ªç´…èŠ±åŸã€å¤§å¸‚é›†æˆ–è§€å…‰å€çš„å°åº—ï¼Œ<strong>æ®ºåƒ¹æ˜¯å¿…é ˆçš„</strong>ã€‚é€šå¸¸å¾é–‹åƒ¹çš„ 50%-60% é–‹å§‹å–Šï¼Œä¿æŒå¾®ç¬‘ä½†å …å®šã€‚</p>
                </div>
                <div class="bg-teal-700 bg-opacity-50 p-4 rounded-lg">
                    <div class="text-3xl mb-2">ğŸ’Š</div>
                    <h3 class="font-bold text-white mb-1">è—¥å¦èˆ‡ç«ç‘°æ°´</h3>
                    <p class="text-sm text-teal-100">åœŸè€³å…¶è—¥å¦åº—å« "Eczane"ã€‚è‘—åçš„ç«ç‘°æ°´ (Gulsha) åœ¨é€™è£¡è²·æœ€ä¾¿å®œï¼Œå±ˆè‡£æ° (Watsons) æˆ– Gratis ä¹Ÿæœ‰è³£ã€‚</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-100 text-gray-500 py-6 mt-8 text-center text-xs">
        <p>è¡Œç¨‹æ—¥æœŸï¼š2025/03/12 - 2025/03/20</p>
        <p>ç¥æ‚¨æ—…é€”æ„‰å¿«ï¼App Generated for User</p>
    </footer>

    <script>
        // --- DATA STORE ---
        const tripData = [
            {
                date: "3/12",
                day: "Day 1",
                location: "Taipei -> Istanbul",
                hotel: "æ©Ÿä¸Š / è½‰æ©Ÿ",
                hotelAddress: "",
                hotelCoords: null,
                summary: "å‡ºç™¼æ—¥ã€‚å»ºè­°åœ¨æ¡ƒåœ’æ©Ÿå ´æˆ–è½‰æ©Ÿé»è³¼è²·å¿…è¦çš„å…ç¨…å“ã€‚æŠµé”ä¼Šæ–¯å¦å ¡é€šå¸¸æ˜¯æ¸…æ™¨æˆ–éš”æ—¥ã€‚",
                shoppingTip: "æ©Ÿä¸Šä¿æ¿•å¾ˆé‡è¦ï¼Œå¤šå–æ°´ã€‚",
                spots: [],
                chartData: { distance: [], types: [0,0,0,0] }
            },
            {
                date: "3/13",
                day: "Day 2",
                location: "Istanbul -> Safranbolu",
                hotel: "Hilton Garden Inn Safranbolu",
                hotelAddress: "Hilton Garden Inn Safranbolu, Safranbolu, KarabÃ¼k, Turkey",
                hotelCoords: [41.2569, 32.6931],
                summary: "ç•ªç´…èŠ±åŸ (Safranbolu) æ˜¯ä¸–ç•Œéºç”¢å±±åŸã€‚é€™è£¡æ˜¯è²·è€æ´¾æ‰‹å·¥è—å“ã€ç•ªç´…èŠ±ç›¸é—œç”¢å“æœ€å¥½çš„åœ°æ–¹ã€‚é£¯åº—è·é›¢è€åŸå€æœ‰ä¸€å°æ®µè·é›¢ï¼Œå»ºè­°æ­è»Šæˆ–åƒåœ˜ç§»å‹•ã€‚",
                shoppingTip: "å¿…è²·ï¼šç•ªç´…èŠ±é¦™çš‚ã€åœŸè€³å…¶è»Ÿç³– (Lokumï¼Œé€™è£¡çš„æœ€è€ç‰Œ)ã€å‚³çµ±éŠ…å™¨ã€‚",
                spots: [
                    { name: "Safranbolu Eski Carsi (è€åŸå€å¸‚é›†)", distance: 25, walkText: "æ­¥è¡Œç´„ 25-30 åˆ† / è»Šç¨‹ 5 åˆ†", type: "å¤è€å¸‚é›†", goods: "ç•ªç´…èŠ±ã€è»Ÿç³–ã€æ‰‹å·¥çš‚ã€çš®é©", price: "$", desc: "é›–ç„¶é›¢é£¯åº—æœ‰é»è·é›¢ï¼Œä½†é€™æ˜¯å¿…é€›é‡é»ã€‚å¤è‰²å¤é¦™ï¼Œè»Ÿç³–è©¦åƒçµ¦å¾ˆå¤§æ–¹ã€‚", mapQuery: "Safranbolu Eski Ã‡arÅŸÄ±, Safranbolu", coords: [41.2533, 32.6878] },
                    { name: "Migros (Mutlu Sok.)", distance: 4, walkText: "æ­¥è¡Œç´„ 3-5 åˆ†é˜", type: "Migros", brand: "migros", goods: "æ°´ã€æœæ±ã€é›¶é£Ÿã€ç”Ÿé®®", price: "$", desc: "å°±åœ¨ Yeni Mahalle çš„ Mutlu è¡—ä¸Šï¼Œé›¢é£¯åº—æœ€è¿‘çš„è¶…å¸‚ã€‚", mapQuery: "MM Migros, Yeni Mah. Mutlu Sokak No:2, Safranbolu", coords: [41.2575, 32.6940] },
                    { name: "ÅOK (BaÄŸlar Cad.)", distance: 6, walkText: "æ­¥è¡Œç´„ 5-8 åˆ†é˜", type: "ÅOK", brand: "sok", goods: "é£²ç”¨æ°´ã€é¤…ä¹¾ã€ç´…èŒ¶åŒ…", price: "$", desc: "BaÄŸlar å¤§é“ä¸Šçš„ ÅOKï¼Œåƒ¹æ ¼è·Ÿ BIM å·®ä¸å¤šä¾¿å®œã€‚", mapQuery: "ÅOK Market, Yeni Mah. Alparslan TÃ¼rkeÅŸ BaÄŸlar Caddesi, Safranbolu", coords: [41.2560, 32.6960] },
                    { name: "A101 (Yenimahalle)", distance: 6, walkText: "æ­¥è¡Œç´„ 5-7 åˆ†é˜", type: "A101", brand: "a101", goods: "é›¶é£Ÿã€æ—¥ç”¨å“", price: "$", desc: "åŒåœ¨ Yeni Mahalle å€ï¼Œèµ°è·¯å°±åˆ°ã€‚", mapQuery: "A101, Ã–zgÃ¼r Sk. Yenimahalle Mah., Safranbolu", coords: [41.2572, 32.6950] },
                    { name: "IÅŸÄ±kgÃ¼l Eczanesi", distance: 6, walkText: "æ­¥è¡Œç´„ 5-7 åˆ†é˜", type: "Eczane", brand: "eczane", goods: "è—¥å“ã€é˜²æ›¬ã€åŸºç¤ä¿é¤Šå“", price: "$", desc: "Sadri ArtunÃ§ å¤§é“ä¸Šï¼Œç•ªç´…èŠ±åŸæ²’æœ‰ Gratis/Watsonsï¼Œè—¥å¦éœ€æ±‚ä¾†é€™è£¡ã€‚", mapQuery: "IÅŸÄ±kgÃ¼l Eczanesi, Yeni Mah. Sadri ArtunÃ§ Cad. No:139/A, Safranbolu", coords: [41.2565, 32.6945] }
                ],
                chartData: { distance: [25, 4, 6, 6, 6], types: [10, 80, 10, 0] }
            },
            {
                date: "3/14",
                day: "Day 3",
                location: "Safranbolu -> Ankara -> Cappadocia",
                hotel: "Signature Garden Avanos Hotel",
                hotelAddress: "Signature Garden Avanos Hotel, Avanos, NevÅŸehir, Turkey",
                hotelCoords: [38.7190, 34.8490],
                summary: "é•·é€”æ‹‰è»ŠæŠµé”å¡å¸•å¤šå¥‡äºçš„é˜¿ç“¦è«¾æ–¯ (Avanos) é™¶ç“·å°é®ã€‚é£¯åº—ä½æ–¼é™¶ç“·å€ï¼Œé€™è£¡ä»¥ç´…åœŸé™¶ç“·èåã€‚",
                shoppingTip: "Avanos æ˜¯é™¶è—ä¹‹éƒ½ã€‚é™¤äº†é™¶ç“·ï¼Œé™„è¿‘ä¹Ÿæœ‰è¶…å¸‚å¯ä»¥è²·æ°´æœå’Œå„ªæ ¼ã€‚",
                spots: [
                    { name: "Avanos é™¶ç“·å·¥åŠ", distance: 10, walkText: "æ­¥è¡Œ/è»Šç¨‹ 10 åˆ†é˜å…§", type: "å·¥è—å“", goods: "æ‰‹å·¥å½©ç¹ªé™¶ç“·ã€ç¢—ç›¤", price: "$", desc: "é£¯åº—æœ¬èº«å°±åœ¨ Avanos å€åŸŸï¼Œå‘¨é‚Šæœ‰å¾ˆå¤šé™¶ç“·å±•ç¤ºä¸­å¿ƒï¼Œåƒ¹æ ¼æ¯”ä¼Šæ–¯å¦å ¡ä¾¿å®œã€‚", mapQuery: "Avanos Pottery, Avanos, NevÅŸehir", coords: [38.7150, 34.8460] },
                    { name: "ÅOK (Kapadokya Cad.)", distance: 4, walkText: "æ­¥è¡Œç´„ 3-6 åˆ†é˜", type: "ÅOK", brand: "sok", goods: "é£²ç”¨æ°´ã€é›¶é£Ÿã€å„ªæ ¼", price: "$", desc: "Cumhuriyet å€ Kapadokya å¤§é“ä¸Šï¼Œé›¢é£¯åº—æœ€è¿‘ã€‚", mapQuery: "ÅOK Market, Cumhuriyet Mahallesi, Kapadokya Caddesi No:56/9, Avanos", coords: [38.7185, 34.8505] },
                    { name: "A101 (Kapadokya Cad.)", distance: 4, walkText: "æ­¥è¡Œç´„ 3-5 åˆ†é˜", type: "A101", brand: "a101", goods: "é£²ç”¨æ°´ã€ç„¡èŠ±æœä¹¾ã€å„ªæ ¼", price: "$", desc: "åŒåœ¨ Cumhuriyet å€ Kapadokya å¤§é“ä¸Šï¼Œè·Ÿ ÅOK å¾ˆè¿‘ã€‚", mapQuery: "A101, Cumhuriyet Mahallesi, Kapadokya Caddesi No:9, Avanos", coords: [38.7180, 34.8500] },
                    { name: "Migros Jet (Mithat DÃ¼lge Cad.)", distance: 10, walkText: "æ­¥è¡Œç´„ 8-12 åˆ†é˜", type: "Migros", brand: "migros", goods: "ç”Ÿé®®ã€æ°´æœã€é£²æ–™", price: "$", desc: "åœ¨éš”å£ BahÃ§elievler å€ï¼Œå“é …æ¯” A101/ÅOK å¤šä¸€äº›ã€‚", mapQuery: "Migros Jet, BahÃ§elievler Mah. Mithat DÃ¼lge Cad. No:1/2, Avanos", coords: [38.7210, 34.8520] },
                    { name: "Can Eczanesi", distance: 4, walkText: "æ­¥è¡Œç´„ 3-5 åˆ†é˜", type: "Eczane", brand: "eczane", goods: "è—¥å“ã€é˜²æ›¬ã€åŸºç¤ä¿é¤Š", price: "$", desc: "Zelve å¤§é“ä¸Šï¼ŒAvanos æ²’æœ‰ Gratis/Watsonsï¼Œè—¥å¦ä¾†é€™è£¡ã€‚", mapQuery: "Can Eczanesi, Cumhuriyet Mah. Zelve Caddesi No:20/8, Avanos", coords: [38.7175, 34.8485] }
                ],
                chartData: { distance: [10, 4, 4, 10, 4], types: [0, 80, 20, 0] }
            },
            {
                date: "3/15",
                day: "Day 4",
                location: "Cappadocia (å…¨æ—¥)",
                hotel: "Signature Garden Avanos Hotel",
                hotelAddress: "Signature Garden Avanos Hotel, Avanos, NevÅŸehir, Turkey",
                hotelCoords: [38.7190, 34.8490],
                summary: "å¡å¸•å¤šå¥‡äºå…¨æ—¥éŠã€‚é™¤äº†ç†±æ°£çƒï¼Œé€™å¤©é€šå¸¸æœƒå»åœ°æ¯¯å·¥å» æˆ–ç å¯¶åº—ï¼ˆåœŸè€³å…¶çŸ³ï¼‰ã€‚å¦‚æœæ‚¨æƒ³è²·ç´€å¿µå“ï¼ŒGoreme é®ä¸Šé¸æ“‡æ¯”è¼ƒå¤šã€‚",
                shoppingTip: "åœ°æ¯¯æ˜¯é«˜åƒ¹å“ï¼Œè«‹é‡åŠ›è€Œç‚ºã€‚åœŸè€³å…¶çŸ³ (Turquoise) æ˜¯ä¸éŒ¯çš„ç´€å¿µå“ã€‚è¶…å¸‚ç¹¼çºŒè£œè²¨ã€‚",
                spots: [
                    { name: "Goreme å¸‚å€å°åº— (éœ€æ­è»Š)", distance: 60, walkText: "éœ€æ­è¨ˆç¨‹è»Š (15åˆ†é˜)", type: "è§€å…‰è¡—å€", goods: "ç†±æ°£çƒé€ å‹ç´€å¿µå“ã€æ˜ä¿¡ç‰‡ã€åœ°æ¯¯", price: "$", desc: "å¦‚æœæ‚¨æœ‰è‡ªç”±æ´»å‹•æ™‚é–“å» Goremeï¼Œé‚£æ˜¯è²·å°ç´€å¿µå“æœ€é›†ä¸­çš„åœ°æ–¹ã€‚", mapQuery: "GÃ¶reme, NevÅŸehir", coords: [38.6431, 34.8312] },
                    { name: "é£¯åº—å‘¨é‚Šæ•£æ­¥", distance: 5, walkText: "æ­¥è¡Œ 5 åˆ†é˜", type: "æ•£æ­¥", goods: "é¢¨æ™¯ã€ç´…æ²³æ™¯è‰²", price: "Free", desc: "Avanos ç´…æ²³é‚Šå¾ˆæ¼‚äº®ï¼Œé©åˆå‚æ™šæ•£æ­¥ï¼Œè³¼ç‰©é»è¼ƒå°‘ã€‚", mapQuery: "KÄ±zÄ±lÄ±rmak River, Avanos", coords: [38.7165, 34.8470] },
                    { name: "ÅOK (Kapadokya Cad.)", distance: 4, walkText: "æ­¥è¡Œç´„ 3-6 åˆ†é˜", type: "ÅOK", brand: "sok", goods: "è£œè²¨é£²ç”¨æ°´ã€é›¶é£Ÿ", price: "$", desc: "åŒ Day 3ï¼Œé£¯åº—é™„è¿‘æœ€è¿‘çš„è¶…å¸‚ã€‚", mapQuery: "ÅOK Market, Cumhuriyet Mahallesi, Kapadokya Caddesi No:56/9, Avanos", coords: [38.7185, 34.8505] }
                ],
                chartData: { distance: [15, 5, 4], types: [10, 80, 10, 0] }
            },
            {
                date: "3/16",
                day: "Day 5",
                location: "Cappadocia -> Pamukkale",
                hotel: "Pam Thermal Hotel",
                hotelAddress: "Pam Thermal Hotel, KarahayÄ±t, Pamukkale, Denizli, Turkey",
                hotelCoords: [37.7920, 29.1190],
                summary: "æ‹‰è»Šå‰å¾€æ£‰å ¡ (Pamukkale)ã€‚é€™è£¡ç››ç”¢æ£‰èŠ±ï¼Œæ˜¯åœŸè€³å…¶ç´¡ç¹”æ¥­ä¸­å¿ƒã€‚é£¯åº—é€šå¸¸æœ‰æº«æ³‰ã€‚",
                shoppingTip: "é€™æ˜¯è²·æ¯›å·¾ã€æµ´è¢ã€æ£‰Tæœ€åˆ’ç®—çš„ä¸€ç«™ã€‚Karahayit æ‘èŠå°±åœ¨é£¯åº—é™„è¿‘ã€‚",
                spots: [
                    { name: "Karahayit Village (ç´…è‰²æº«æ³‰æ‘)", distance: 10, walkText: "æ­¥è¡Œ 10-15 åˆ†é˜", type: "åœ¨åœ°å¸‚é›†", goods: "æ£‰ç¹”å“ã€æµ´è¢ã€çŸ³æ¦´é†‹", price: "$", desc: "é£¯åº—èµ°å‡ºå»ä¸é å°±æ˜¯å¸‚é›†ï¼Œé€™è£¡çš„ç´¡ç¹”å“ä¿—åˆå¤§ç¢—ï¼Œè¨˜å¾—æ®ºåƒ¹ã€‚", mapQuery: "KarahayÄ±t, Pamukkale, Denizli", coords: [37.7940, 29.1170] },
                    { name: "é£¯åº—å…§å•†åº—", distance: 1, walkText: "é£¯åº—å¤§å»³", type: "ä¾¿åˆ©åº—", goods: "æ³³è¡£ã€æ³³å¸½ (æ³¡æº«æ³‰ç”¨)", price: "$$", desc: "å¦‚æœä½ å¿˜äº†å¸¶æ³³è¡£æ³¡æº«æ³‰ï¼Œåªèƒ½åœ¨é€™è£¡è²·è²´çš„äº†ã€‚", mapQuery: "", coords: [37.7920, 29.1190] },
                    { name: "Migros Jet (AtatÃ¼rk Cad.)", distance: 4, walkText: "æ­¥è¡Œç´„ 3-6 åˆ†é˜", type: "Migros", brand: "migros", goods: "æ°´ã€æœæ±ã€é›¶é£Ÿã€ç”Ÿé®®", price: "$", desc: "æ‘ä¸­ä¸»è¡— AtatÃ¼rk å¤§é“ä¸Šï¼Œé›¢é£¯åº—å¾ˆè¿‘ï¼Œå“é …æ¯”è¼ƒé½Šå…¨ã€‚", mapQuery: "Migros Jet, KarahayÄ±t Mah. AtatÃ¼rk Cad. No:20, Pamukkale, Denizli", coords: [37.7935, 29.1180] },
                    { name: "ÅOK (152. Sok.)", distance: 6, walkText: "æ­¥è¡Œç´„ 5-8 åˆ†é˜", type: "ÅOK", brand: "sok", goods: "é£²ç”¨æ°´ã€é¤…ä¹¾ã€æœæ±", price: "$", desc: "KarahayÄ±t æ‘å…§çš„ ÅOKï¼Œåœ¨ä¸»è¡—æ—çš„å°å··è£¡ã€‚", mapQuery: "ÅOK Market, KarahayÄ±t Mahallesi, 152. Sokak No:3/A, Pamukkale, Denizli", coords: [37.7930, 29.1165] },
                    { name: "A101 (KÄ±zÄ±lhamam Sok.)", distance: 8, walkText: "æ­¥è¡Œç´„ 5-10 åˆ†é˜", type: "A101", brand: "a101", goods: "é£²ç”¨æ°´ã€æœæ±ã€é›¶é£Ÿ", price: "$", desc: "KarahayÄ±t æ‘å…§çš„ A101ï¼ŒKÄ±zÄ±lhamam è¡—ä¸Šã€‚", mapQuery: "A101, KarahayÄ±t Mahallesi, KÄ±zÄ±lhamam Sokak No:118, Pamukkale, Denizli", coords: [37.7925, 29.1155] },
                    { name: "Eczane (AtatÃ¼rk Cad.)", distance: 4, walkText: "æ­¥è¡Œç´„ 3-6 åˆ†é˜", type: "Eczane", brand: "eczane", goods: "è—¥å“ã€é˜²æ›¬ã€åŸºç¤ä¿é¤Š", price: "$", desc: "ä¸»è¡— AtatÃ¼rk å¤§é“ä¸Šï¼ŒMigros Jet æ—é‚Šã€‚æ£‰å ¡æ²’æœ‰ Gratis/Watsonsã€‚", mapQuery: "Eczane, KarahayÄ±t Mah. AtatÃ¼rk Cad., Pamukkale, Denizli", coords: [37.7936, 29.1178] }
                ],
                chartData: { distance: [10, 1, 4, 6, 8, 4], types: [50, 15, 35, 0] }
            },
            {
                date: "3/17",
                day: "Day 6",
                location: "Pamukkale -> Izmir",
                hotel: "Kaya Izmir Thermal & Convention",
                hotelAddress: "Kaya Izmir Thermal & Convention, NarlÄ±dere, Ä°zmir, Turkey",
                hotelCoords: [38.3920, 26.9480],
                summary: "å‰å¾€æ„›ç´æµ·å¤§åŸä¼ŠèŒ²å¯†çˆ¾ã€‚Kaya é£¯åº—ä½æ–¼ Narlidere å€ï¼Œé›¢å¸‚ä¸­å¿ƒæœ‰é»è·é›¢ï¼Œä½†é›¢ Agora è³¼ç‰©ä¸­å¿ƒä¸ç®—å¤ªé ã€‚",
                shoppingTip: "é€™æ™šé©åˆå»é€›ç¾ä»£åŒ–çš„ Shopping Mallã€‚Agora Mall æœ‰åœ‹éš›å“ç‰Œï¼Œé€›èµ·ä¾†å¾ˆèˆ’æœã€‚",
                spots: [
                    { name: "Agora Shopping Center", distance: 20, walkText: "æ­¥è¡Œç´„ 20 åˆ† / è»Šç¨‹ 5 åˆ†", type: "å¤§å‹å•†å ´", goods: "H&M, LC Waikiki (åœŸè€³å…¶åœ‹æ°‘ç‰Œ), ç©å…·, ç¾é£Ÿè¡—", price: "$", desc: "éå¸¸å¥½é€›çš„å•†å ´ï¼Œå¦‚æœä¸å¾é£¯åº—èµ°éå»ï¼Œæ­è¨ˆç¨‹è»Šå¾ˆä¾¿å®œä¹Ÿå¾ˆè¿‘ã€‚", mapQuery: "Agora AVM, BalÃ§ova, Ä°zmir", coords: [38.3880, 27.0300] },
                    { name: "IstinyePark Izmir", distance: 40, walkText: "è»Šç¨‹ç´„ 10-15 åˆ†", type: "é ‚ç´šå•†å ´", goods: "ç²¾å“ã€é«˜ç«¯æ™‚å°š", price: "$$", desc: "ä¼ŠèŒ²å¯†çˆ¾æœ€é«˜ç´šçš„å•†å ´ï¼Œå»ºç¯‰å¾ˆç¾ï¼Œé©åˆæƒ³çœ‹ç²¾å“çš„äººã€‚", mapQuery: "Ä°stinyePark Ä°zmir, BalÃ§ova, Ä°zmir", coords: [38.3910, 27.0350] },
                    { name: "ÅOK (MithatpaÅŸa Cad.)", distance: 4, walkText: "æ­¥è¡Œç´„ 3-6 åˆ†é˜", type: "ÅOK", brand: "sok", goods: "é£²ç”¨æ°´ã€é›¶é£Ÿã€å„ªæ ¼", price: "$", desc: "åŒåœ¨ IlÄ±ca å€ MithatpaÅŸa å¤§é“ä¸Šï¼Œé£¯åº—é™„è¿‘æœ€è¿‘çš„è¶…å¸‚ã€‚", mapQuery: "ÅOK Market, IlÄ±ca Mah. MithatpaÅŸa Cad. No:6/A, NarlÄ±dere, Ä°zmir", coords: [38.3925, 26.9500] },
                    { name: "Migros (MithatpaÅŸa Cad.)", distance: 6, walkText: "æ­¥è¡Œç´„ 5-8 åˆ†é˜", type: "Migros", brand: "migros", goods: "ç”Ÿé®®ã€æ°´æœã€é£²æ–™ã€æ—¥ç”¨å“", price: "$", desc: "IlÄ±ca å€ MithatpaÅŸa å¤§é“ä¸Šï¼Œå“é …æ¯” ÅOK å¤šã€‚", mapQuery: "Migros, IlÄ±ca Mah. MithatpaÅŸa Cad. No:119/A, NarlÄ±dere, Ä°zmir", coords: [38.3930, 26.9520] },
                    { name: "A101 (MithatpaÅŸa Cad.)", distance: 6, walkText: "æ­¥è¡Œç´„ 5-8 åˆ†é˜", type: "A101", brand: "a101", goods: "é£²ç”¨æ°´ã€é›¶é£Ÿã€æ—¥ç”¨å“", price: "$", desc: "åŒåœ¨ IlÄ±ca å€ MithatpaÅŸa å¤§é“ä¸Šã€‚", mapQuery: "A101, IlÄ±ca Mah. MithatpaÅŸa Cad. No:39/A, NarlÄ±dere, Ä°zmir", coords: [38.3928, 26.9510] },
                    { name: "Gratis (MithatpaÅŸa Cad.)", distance: 18, walkText: "æ­¥è¡Œç´„ 15-20 åˆ†ï¼ˆä¸‹å¡ï¼‰", type: "Gratis", brand: "gratis", goods: "ç«ç‘°æ°´ã€é¢è†œã€è­·æ‰‹éœœã€åœŸè€³å…¶å¹³åƒ¹ç¾å¦", price: "$", desc: "NarlÄ±dere ä¸»è¡—ä¸Šï¼Œé›¢é£¯åº—æœ€è¿‘çš„è—¥å¦ã€‚å›ç¨‹ä¸Šå¡ä¹…ä¸€é»ï¼Œæˆ–æ­ dolmuÅŸ å›ã€‚", mapQuery: "Gratis, MithatpaÅŸa Caddesi No:238/A, NarlÄ±dere, Ä°zmir", coords: [38.3960, 26.9600] },
                    { name: "Nar Eczanesi", distance: 4, walkText: "æ­¥è¡Œç´„ 3-5 åˆ†é˜", type: "Eczane", brand: "eczane", goods: "è—¥å“ã€é˜²æ›¬ã€æ€¥éœ€ä¿é¤Šå“", price: "$", desc: "IlÄ±ca å€ MithatpaÅŸa å¤§é“ä¸Šï¼Œé£¯åº—é™„è¿‘æœ€è¿‘çš„è—¥å±€ã€‚", mapQuery: "Nar Eczanesi, IlÄ±ca Mah. MithatpaÅŸa Cad. No:32/A, NarlÄ±dere, Ä°zmir", coords: [38.3922, 26.9495] }
                ],
                chartData: { distance: [20, 10, 4, 6, 6, 18, 4], types: [50, 0, 40, 10] }
            },
            {
                date: "3/18",
                day: "Day 7",
                location: "Izmir -> Istanbul",
                hotel: "Grand Halic Hotel",
                hotelAddress: "Grand Halic Hotel, KemankeÅŸ Karamustafa PaÅŸa, BeyoÄŸlu, Ä°stanbul, Turkey",
                hotelCoords: [41.0275, 28.9720],
                summary: "å›åˆ°ä¼Šæ–¯å¦å ¡ã€‚Grand Halic é£¯åº—ä½ç½®çµ•ä½³ï¼ä½æ–¼é‡‘è§’ç£æ—ï¼Œæ­¥è¡Œå¯é”ä½©æ‹‰å€ (Pera) å’Œç¨ç«‹å¤§é“ã€‚",
                shoppingTip: "ä¼Šæ–¯å¦å ¡ç²¾è¯ï¼æ™šä¸Šç›´æ¥èµ°å»ç¨ç«‹å¤§é“ (Istiklal) æ„Ÿå—å¤œç”Ÿæ´»å’Œè³¼ç‰©ã€‚",
                spots: [
                    { name: "Istiklal Street (ç¨ç«‹å¤§é“)", distance: 10, walkText: "æ­¥è¡Œ 8-12 åˆ†é˜", type: "æ­¥è¡Œè¡—", goods: "ç¾å¦ (Flormar, Golden Rose), è¡£æœ (Mango, Zara), ç”œé»", price: "$", desc: "åœŸè€³å…¶çš„é¦™æ¦­å¤§é“ã€‚å»ºè­°å» Hafiz Mustafa 1864 è²·ç²¾è£è»Ÿç³–ç•¶ä¼´æ‰‹ç¦®ã€‚", mapQuery: "Ä°stiklal Caddesi, BeyoÄŸlu, Ä°stanbul", coords: [41.0320, 28.9770] },
                    { name: "ÅiÅŸhane åœ°éµç«™å‘¨é‚Š", distance: 5, walkText: "æ­¥è¡Œ 5 åˆ†é˜", type: "è¨­è¨ˆå°åº—", goods: "è¨­è¨ˆç‡ˆé£¾ã€å®¶é£¾", price: "$", desc: "é£¯åº—é™„è¿‘å¾ˆå¤šè³£ç‡ˆé£¾å’Œæ¨‚å™¨çš„åº—ï¼Œå¾ˆæœ‰æ°£æ°›ã€‚", mapQuery: "ÅiÅŸhane Metro, BeyoÄŸlu, Ä°stanbul", coords: [41.0285, 28.9735] },
                    { name: "ÅOK (TarlabaÅŸÄ± Blv.)", distance: 6, walkText: "æ­¥è¡Œç´„ 5-8 åˆ†é˜", type: "ÅOK", brand: "sok", goods: "é£²ç”¨æ°´ã€æœæ±ã€é¤…ä¹¾ã€ç´…èŒ¶åŒ…ã€å„ªæ ¼", price: "$", desc: "TarlabaÅŸÄ± å¤§é“ä¸Šï¼Œè·Ÿé£¯åº—çš„ Refik Saydam å¤§é“å¹³è¡Œï¼Œæœ€è¿‘çš„è¶…å¸‚ã€‚", mapQuery: "ÅOK Market, HÃ¼seyinaÄŸa Mahallesi, TarlabaÅŸÄ± BulvarÄ± No:61-63, BeyoÄŸlu, Ä°stanbul", coords: [41.0310, 28.9760] },
                    { name: "Migros Jet (Bankalar Cad.)", distance: 9, walkText: "æ­¥è¡Œç´„ 8-10 åˆ†é˜", type: "Migros", brand: "migros", goods: "ç”Ÿé®®ã€æ°´æœã€é£²æ–™", price: "$", desc: "å¾€ KarakÃ¶y/Galata æ–¹å‘èµ°ï¼ŒBankalar å¤§é“ä¸Šã€‚", mapQuery: "Migros Jet, Bereketzade Mah. Bankalar Cad. No:6/A, BeyoÄŸlu, Ä°stanbul", coords: [41.0240, 28.9740] },
                    { name: "Gratis (Ä°stiklal NarmanlÄ±han)", distance: 11, walkText: "æ­¥è¡Œç´„ 10-12 åˆ†é˜", type: "Gratis", brand: "gratis", goods: "ç«ç‘°æ°´ (Gulsha)ã€é¢è†œã€è­·æ‰‹éœœã€Flormar å½©å¦", price: "$", desc: "ç¨ç«‹å¤§é“ NarmanlÄ± Han è£¡é¢çš„ Gratisï¼Œå¾ ÅiÅŸhane èµ°ä¸Šå»å°±åˆ°ã€‚", mapQuery: "Gratis, AsmalÄ±mescit Mah. Ä°stiklal Cad. No:180/A, NarmanlÄ± Han, BeyoÄŸlu, Ä°stanbul", coords: [41.0330, 28.9780] },
                    { name: "Watsons (Ä°stiklal Cad.)", distance: 13, walkText: "æ­¥è¡Œç´„ 12-15 åˆ†é˜", type: "Watsons", brand: "watsons", goods: "åœ‹éš›å“ç‰Œä¿é¤Šã€å½©å¦ã€ç«ç‘°æ°´", price: "$", desc: "ç¨ç«‹å¤§é“ä¸Šçš„ Watsonsï¼Œå“é …æ¯” Gratis åœ‹éš›åŒ–ã€‚å…¨ç¨‹æœ€æ–¹ä¾¿è²· Watsons çš„æ©Ÿæœƒï¼", mapQuery: "Watsons, AsmalÄ±mescit Mahallesi, Ä°stiklal Caddesi No:134, BeyoÄŸlu, Ä°stanbul", coords: [41.0335, 28.9775] },
                    { name: "TÃ¼nel Eczanesi", distance: 6, walkText: "æ­¥è¡Œç´„ 5-8 åˆ†é˜", type: "Eczane", brand: "eczane", goods: "è—¥å“ã€è™•æ–¹è—¥ã€æ€¥éœ€ç”¨å“", price: "$", desc: "MeÅŸrutiyet å¤§é“ä¸Šï¼Œè·Ÿé£¯åº—åŒå€ï¼Œèµ°è·¯å¾ˆè¿‘ã€‚", mapQuery: "TÃ¼nel Eczanesi, Evliya Ã‡elebi Mah. MeÅŸrutiyet Caddesi No:78, BeyoÄŸlu, Ä°stanbul", coords: [41.0290, 28.9745] },
                    { name: "NiÅŸantaÅŸÄ± ç²¾å“è¡—å€", distance: 15, walkText: "åœ°éµ M2 ç·šç´„ 10 åˆ† / è¨ˆç¨‹è»Š 10-15 åˆ†", type: "ç²¾å“è¡—å€", goods: "Beymen, Vakko, Louis Vuitton, Gucci, åœŸè€³å…¶è¨­è¨ˆå¸«å“ç‰Œ", price: "$$", desc: "ä¼Šæ–¯å¦å ¡æœ€é«˜ç´šçš„è³¼ç‰©è¡—ï¼ŒAbdi Ä°pekÃ§i Caddesi å’Œ TeÅŸvikiye Caddesi ä¸Šç²¾å“æ—ç«‹ã€‚å¾ ÅiÅŸhane æ­ M2 åœ°éµåˆ° Osmanbey ç«™å‡ºä¾†å°±æ˜¯ã€‚", mapQuery: "NiÅŸantaÅŸÄ±, Abdi Ä°pekÃ§i Caddesi, ÅiÅŸli, Ä°stanbul", coords: [41.0480, 28.9950] }
                ],
                chartData: { distance: [10, 5, 6, 9, 11, 13, 6, 15], types: [30, 20, 25, 25] }
            },
            {
                date: "3/19",
                day: "Day 8",
                location: "Istanbul (Free Day)",
                hotel: "Grand Halic Hotel",
                hotelAddress: "Grand Halic Hotel, KemankeÅŸ Karamustafa PaÅŸa, BeyoÄŸlu, Ä°stanbul, Turkey",
                hotelCoords: [41.0275, 28.9720],
                summary: "ä¼Šæ–¯å¦å ¡å…¨æ—¥ã€‚é€™æ˜¯æœ€å¾Œè£œè²¨çš„æ©Ÿæœƒã€‚å»ºè­°å‰å¾€é¦™æ–™å¸‚é›† (Spice Bazaar) æˆ–å¤§å¸‚é›† (Grand Bazaar)ã€‚",
                shoppingTip: "é¦™æ–™å¸‚é›†è²·æœä¹¾ã€èŠ±èŒ¶ã€é¦™æ–™ã€‚å¤§å¸‚é›†è²·çš®è¡£ã€é‡‘é£¾ã€å½©ç›¤ã€‚è¨˜å¾—ï¼šè²¨æ¯”ä¸‰å®¶ä¸åƒè™§ã€‚",
                spots: [
                    { name: "Egyptian Bazaar (é¦™æ–™å¸‚é›†)", distance: 20, walkText: "æ­¥è¡Œç´„ 20 åˆ† / è¼•è»Œ 10 åˆ†", type: "å‚³çµ±å¸‚é›†", goods: "åœŸè€³å…¶è»Ÿç³–(ç§¤é‡), è˜‹æœèŒ¶, ç•ªç´…èŠ±, çƒé­šå­", price: "$", desc: "æ¯”å¤§å¸‚é›†æ›´è¦ªæ°‘ï¼Œæ›´å¥½è²·åœŸç”¢ã€‚å»ºè­°åœ¨é€™è£¡è²·é½Šæ‰€æœ‰åƒçš„ä¼´æ‰‹ç¦®ã€‚", mapQuery: "MÄ±sÄ±r Ã‡arÅŸÄ±sÄ±, EminÃ¶nÃ¼, Ä°stanbul", coords: [41.0165, 28.9705] },
                    { name: "Grand Bazaar (å¤§å¸‚é›†)", distance: 25, walkText: "æ­¥è¡Œ 25 åˆ† / è¼•è»Œ T1 ç·š", type: "è¶…å¤§å‹å¸‚é›†", goods: "é‡‘é£¾, åœ°æ¯¯, çš®ä»¶, ä»¿å†’å“", price: "$-$$", desc: "è¿·å®®ä¸€æ¨£çš„åœ°æ–¹ï¼Œåƒè§€æ€§è³ªå¤§æ–¼è³¼ç‰©ï¼Œé™¤éä½ æ˜¯æ®ºåƒ¹é«˜æ‰‹ã€‚", mapQuery: "KapalÄ±Ã§arÅŸÄ±, BeyazÄ±t, Ä°stanbul", coords: [41.0108, 28.9680] },
                    { name: "Galata Tower (åŠ æ‹‰é”å¡”) å‘¨é‚Š", distance: 10, walkText: "æ­¥è¡Œ 10 åˆ†é˜", type: "æ–‡å‰µè¡—å€", goods: "æ–‡å‰µå°ç‰©, è¨­è¨ˆTæ¤", price: "$", desc: "é£¯åº—å¾€å¡”çš„æ–¹å‘èµ°ï¼Œæœ‰å¾ˆå¤šæ–‡é’å°åº—ã€‚", mapQuery: "Galata Kulesi, BeyoÄŸlu, Ä°stanbul", coords: [41.0256, 28.9741] },
                    { name: "A101 (HacÄ±ahmet)", distance: 11, walkText: "æ­¥è¡Œç´„ 10-12 åˆ†é˜", type: "A101", brand: "a101", goods: "å¤§é‡æ¡è³¼æœä¹¾ã€èŒ¶åŒ…ã€å·§å…‹åŠ›ç•¶ä¼´æ‰‹ç¦®", price: "$", desc: "æœ€å¾Œä¸€å¤©å¤§æ¡è³¼è£œè²¨çš„å¥½é¸æ“‡ã€‚KaptanpaÅŸa å€ä¹Ÿæœ‰ä¸€é–“ã€‚", mapQuery: "A101, Yeni Bostan Sokak No:8 D:1, HacÄ±ahmet, BeyoÄŸlu, Ä°stanbul", coords: [41.0340, 28.9690] },
                    { name: "ÅOK (TarlabaÅŸÄ± Blv.)", distance: 6, walkText: "æ­¥è¡Œç´„ 5-8 åˆ†é˜", type: "ÅOK", brand: "sok", goods: "æœ€å¾Œè£œè²¨é£²ç”¨æ°´ã€é›¶é£Ÿ", price: "$", desc: "åŒ Day 7ï¼Œé£¯åº—é™„è¿‘æœ€è¿‘çš„è¶…å¸‚ã€‚", mapQuery: "ÅOK Market, HÃ¼seyinaÄŸa Mahallesi, TarlabaÅŸÄ± BulvarÄ± No:61-63, BeyoÄŸlu, Ä°stanbul", coords: [41.0310, 28.9760] },
                    { name: "NiÅŸantaÅŸÄ± ç²¾å“è¡—å€", distance: 15, walkText: "åœ°éµ M2 ç·šç´„ 10 åˆ† / è¨ˆç¨‹è»Š 10-15 åˆ†", type: "ç²¾å“è¡—å€", goods: "Beymen, Vakko, Louis Vuitton, Gucci, åœŸè€³å…¶è¨­è¨ˆå¸«å“ç‰Œ", price: "$$", desc: "ä¼Šæ–¯å¦å ¡æœ€é«˜ç´šçš„è³¼ç‰©è¡—ï¼ŒAbdi Ä°pekÃ§i Caddesi å’Œ TeÅŸvikiye Caddesi ä¸Šç²¾å“æ—ç«‹ã€‚å¾ ÅiÅŸhane æ­ M2 åœ°éµåˆ° Osmanbey ç«™å‡ºä¾†å°±æ˜¯ã€‚", mapQuery: "NiÅŸantaÅŸÄ±, Abdi Ä°pekÃ§i Caddesi, ÅiÅŸli, Ä°stanbul", coords: [41.0480, 28.9950] }
                ],
                chartData: { distance: [20, 25, 10, 11, 6, 15], types: [15, 50, 20, 15] }
            },
            {
                date: "3/20",
                day: "Day 9",
                location: "Istanbul (æœ€å¾Œä¸€å¤©)",
                hotel: "Grand Halic Hotel",
                hotelAddress: "Grand Halic Hotel, KemankeÅŸ Karamustafa PaÅŸa, BeyoÄŸlu, Ä°stanbul, Turkey",
                hotelCoords: [41.0275, 28.9720],
                summary: "ä¼Šæ–¯å¦å ¡å…¨æ—¥ã€‚é€™æ˜¯æœ€å¾Œè£œè²¨çš„æ©Ÿæœƒã€‚å»ºè­°å‰å¾€é¦™æ–™å¸‚é›† (Spice Bazaar) æˆ–å¤§å¸‚é›† (Grand Bazaar)ã€‚",
                shoppingTip: "é¦™æ–™å¸‚é›†è²·æœä¹¾ã€èŠ±èŒ¶ã€é¦™æ–™ã€‚å¤§å¸‚é›†è²·çš®è¡£ã€é‡‘é£¾ã€å½©ç›¤ã€‚è¨˜å¾—ï¼šè²¨æ¯”ä¸‰å®¶ä¸åƒè™§ã€‚",
                spots: [
                    { name: "Egyptian Bazaar (é¦™æ–™å¸‚é›†)", distance: 20, walkText: "æ­¥è¡Œç´„ 20 åˆ† / è¼•è»Œ 10 åˆ†", type: "å‚³çµ±å¸‚é›†", goods: "åœŸè€³å…¶è»Ÿç³–(ç§¤é‡), è˜‹æœèŒ¶, ç•ªç´…èŠ±, çƒé­šå­", price: "$", desc: "æ¯”å¤§å¸‚é›†æ›´è¦ªæ°‘ï¼Œæ›´å¥½è²·åœŸç”¢ã€‚å»ºè­°åœ¨é€™è£¡è²·é½Šæ‰€æœ‰åƒçš„ä¼´æ‰‹ç¦®ã€‚", mapQuery: "MÄ±sÄ±r Ã‡arÅŸÄ±sÄ±, EminÃ¶nÃ¼, Ä°stanbul", coords: [41.0165, 28.9705] },
                    { name: "Grand Bazaar (å¤§å¸‚é›†)", distance: 25, walkText: "æ­¥è¡Œ 25 åˆ† / è¼•è»Œ T1 ç·š", type: "è¶…å¤§å‹å¸‚é›†", goods: "é‡‘é£¾, åœ°æ¯¯, çš®ä»¶, ä»¿å†’å“", price: "$-$$", desc: "è¿·å®®ä¸€æ¨£çš„åœ°æ–¹ï¼Œåƒè§€æ€§è³ªå¤§æ–¼è³¼ç‰©ï¼Œé™¤éä½ æ˜¯æ®ºåƒ¹é«˜æ‰‹ã€‚", mapQuery: "KapalÄ±Ã§arÅŸÄ±, BeyazÄ±t, Ä°stanbul", coords: [41.0108, 28.9680] },
                    { name: "Galata Tower (åŠ æ‹‰é”å¡”) å‘¨é‚Š", distance: 10, walkText: "æ­¥è¡Œ 10 åˆ†é˜", type: "æ–‡å‰µè¡—å€", goods: "æ–‡å‰µå°ç‰©, è¨­è¨ˆTæ¤", price: "$", desc: "é£¯åº—å¾€å¡”çš„æ–¹å‘èµ°ï¼Œæœ‰å¾ˆå¤šæ–‡é’å°åº—ã€‚", mapQuery: "Galata Kulesi, BeyoÄŸlu, Ä°stanbul", coords: [41.0256, 28.9741] },
                    { name: "A101 (HacÄ±ahmet)", distance: 11, walkText: "æ­¥è¡Œç´„ 10-12 åˆ†é˜", type: "A101", brand: "a101", goods: "å¤§é‡æ¡è³¼æœä¹¾ã€èŒ¶åŒ…ã€å·§å…‹åŠ›ç•¶ä¼´æ‰‹ç¦®", price: "$", desc: "æœ€å¾Œä¸€å¤©å¤§æ¡è³¼è£œè²¨çš„å¥½é¸æ“‡ã€‚KaptanpaÅŸa å€ä¹Ÿæœ‰ä¸€é–“ã€‚", mapQuery: "A101, Yeni Bostan Sokak No:8 D:1, HacÄ±ahmet, BeyoÄŸlu, Ä°stanbul", coords: [41.0340, 28.9690] },
                    { name: "ÅOK (TarlabaÅŸÄ± Blv.)", distance: 6, walkText: "æ­¥è¡Œç´„ 5-8 åˆ†é˜", type: "ÅOK", brand: "sok", goods: "æœ€å¾Œè£œè²¨é£²ç”¨æ°´ã€é›¶é£Ÿ", price: "$", desc: "åŒ Day 7ï¼Œé£¯åº—é™„è¿‘æœ€è¿‘çš„è¶…å¸‚ã€‚", mapQuery: "ÅOK Market, HÃ¼seyinaÄŸa Mahallesi, TarlabaÅŸÄ± BulvarÄ± No:61-63, BeyoÄŸlu, Ä°stanbul", coords: [41.0310, 28.9760] },
                    { name: "NiÅŸantaÅŸÄ± ç²¾å“è¡—å€", distance: 15, walkText: "åœ°éµ M2 ç·šç´„ 10 åˆ† / è¨ˆç¨‹è»Š 10-15 åˆ†", type: "ç²¾å“è¡—å€", goods: "Beymen, Vakko, Louis Vuitton, Gucci, åœŸè€³å…¶è¨­è¨ˆå¸«å“ç‰Œ", price: "$$", desc: "ä¼Šæ–¯å¦å ¡æœ€é«˜ç´šçš„è³¼ç‰©è¡—ï¼ŒAbdi Ä°pekÃ§i Caddesi å’Œ TeÅŸvikiye Caddesi ä¸Šç²¾å“æ—ç«‹ã€‚å¾ ÅiÅŸhane æ­ M2 åœ°éµåˆ° Osmanbey ç«™å‡ºä¾†å°±æ˜¯ã€‚", mapQuery: "NiÅŸantaÅŸÄ±, Abdi Ä°pekÃ§i Caddesi, ÅiÅŸli, Ä°stanbul", coords: [41.0480, 28.9950] }
                ],
                chartData: { distance: [20, 25, 10, 11, 6, 15], types: [15, 50, 20, 15] }
            }
        ];

        // --- APP STATE & RENDER LOGIC ---
        let currentIndex = 0;
        let distChart = null;
        let typeChart = null;

        function initApp() {
            renderTimeline();
            loadDate(0);
        }

        function renderTimeline() {
            const container = document.getElementById('timeline');
            container.innerHTML = tripData.map((item, idx) => `
                <button onclick="loadDate(${idx})"
                    class="flex-shrink-0 min-w-[80px] px-3 py-2 rounded-lg border text-center transition-all duration-200 snap-center
                    ${idx === 0 ? 'active-tab' : 'inactive-tab'}"
                    id="tab-${idx}">
                    <div class="text-xs font-bold opacity-70">${item.date}</div>
                    <div class="text-sm font-bold">${item.day}</div>
                    <div class="text-[10px] truncate w-full">${item.location.split('->')[0]}</div>
                </button>
            `).join('');
        }

        function loadDate(idx) {
            currentIndex = idx;
            const data = tripData[idx];

            document.querySelectorAll('#timeline button').forEach((btn, i) => {
                if (i === idx) {
                    btn.className = "flex-shrink-0 min-w-[80px] px-3 py-2 rounded-lg border text-center transition-all duration-200 snap-center active-tab shadow-md";
                } else {
                    btn.className = "flex-shrink-0 min-w-[80px] px-3 py-2 rounded-lg border text-center transition-all duration-200 snap-center inactive-tab hover:bg-gray-50";
                }
            });

            document.getElementById('day-badge').innerText = `${data.day} â€¢ ${data.date}`;
            document.getElementById('location-title').innerText = data.location;
            document.getElementById('hotel-name').innerText = data.hotel;
            document.getElementById('hotel-note').innerText = data.shoppingTip;
            document.getElementById('daily-summary').innerText = data.summary;

            const spotsContainer = document.getElementById('spots-container');
            if (data.spots.length === 0) {
                spotsContainer.innerHTML = `<div class="p-6 bg-gray-50 rounded-lg text-center text-gray-500">æœ¬æ—¥è¡Œç¨‹ä»¥äº¤é€š/æ©Ÿå ´ç‚ºä¸»ï¼Œè«‹æŠŠæ¡æ©Ÿå ´å…ç¨…åº—æ©Ÿæœƒï¼</div>`;
            } else {
                spotsContainer.innerHTML = data.spots.map((spot, i) => `
                    <div class="bg-white rounded-lg border border-gray-200 p-4 flex flex-col sm:flex-row justify-between items-start hover:border-teal-300 transition-colors ${spot.brand ? 'brand-' + spot.brand : ''}">
                        <div class="mb-2 sm:mb-0 flex-1">
                            <h4 class="font-bold text-gray-800 text-xl flex items-center flex-wrap">
                                ${spot.name}
                                <span class="ml-2 text-sm px-2 py-0.5 rounded border ${spot.brand ? 'brand-tag-' + spot.brand : 'bg-gray-100 text-gray-600'}">${spot.type}</span>
                            </h4>
                            <p class="text-base text-gray-600 mt-1"><span class="font-semibold text-teal-600">æ¨è–¦è³¼è²·ï¼š</span>${spot.goods}</p>
                            <p class="text-sm text-gray-400 mt-2 italic">"${spot.desc}"</p>
                        </div>
                        <div class="flex flex-col items-end min-w-[100px]">
                            <span class="text-sm font-bold bg-teal-50 text-teal-700 px-2 py-1 rounded mb-2">${spot.walkText}</span>
                            ${spot.mapQuery ? `<button onclick="navigate(${i})" class="bg-blue-500 hover:bg-blue-600 text-white text-sm font-bold px-3 py-1.5 rounded-full flex items-center gap-1 transition-colors">
                                <span>ğŸ“</span> å°èˆªå‰å¾€
                            </button>` : ''}
                        </div>
                    </div>
                `).join('');
            }

            updateCharts(data);
            renderMap(data);
            fetchWeather(data.hotelCoords);
            document.getElementById(`tab-${idx}`).scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'center'});
        }

        function updateCharts(data) {
            const ctxDist = document.getElementById('distanceChart').getContext('2d');
            if (distChart) distChart.destroy();

            const distLabels = data.spots.length ? data.spots.map(s => s.name.substring(0, 8) + '...') : ['N/A'];
            const distValues = data.spots.length ? data.spots.map(s => s.distance) : [0];

            distChart = new Chart(ctxDist, {
                type: 'bar',
                data: {
                    labels: distLabels,
                    datasets: [{
                        label: 'æ­¥è¡Œæ™‚é–“ (åˆ†)',
                        data: distValues,
                        backgroundColor: '#81E6D9',
                        borderColor: '#38B2AC',
                        borderWidth: 1,
                        borderRadius: 4,
                        barThickness: 20
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: { beginAtZero: true, grid: { display: false } },
                        y: { grid: { display: false } }
                    },
                    plugins: { legend: { display: false } }
                }
            });

            const ctxType = document.getElementById('typeChart').getContext('2d');
            if (typeChart) typeChart.destroy();

            typeChart = new Chart(ctxType, {
                type: 'doughnut',
                data: {
                    labels: ['æœé£¾/æ™‚å°š', 'ä¼´æ‰‹ç¦®/å·¥è—', 'è¶…å¸‚/ç”Ÿæ´»', 'ç²¾å“/å…¶ä»–'],
                    datasets: [{
                        data: data.chartData.types,
                        backgroundColor: ['#F6AD55', '#68D391', '#63B3ED', '#A0AEC0'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 10, font: { size: 10 } } }
                    }
                }
            });
        }

        // --- WEATHER ---
        const weatherCodes = {
            0: ['â˜€ï¸','æ™´å¤©'], 1: ['ğŸŒ¤','å¤§è‡´æ™´'], 2: ['â›…','å¤šé›²'], 3: ['â˜ï¸','é™°å¤©'],
            45: ['ğŸŒ«','éœ§'], 48: ['ğŸŒ«','å‡éœ§'],
            51: ['ğŸŒ¦','å°æ¯›é›¨'], 53: ['ğŸŒ¦','æ¯›é›¨'], 55: ['ğŸŒ§','å¤§æ¯›é›¨'],
            61: ['ğŸŒ§','å°é›¨'], 63: ['ğŸŒ§','ä¸­é›¨'], 65: ['ğŸŒ§','å¤§é›¨'],
            71: ['ğŸŒ¨','å°é›ª'], 73: ['ğŸŒ¨','ä¸­é›ª'], 75: ['â„ï¸','å¤§é›ª'],
            80: ['ğŸŒ¦','é™£é›¨'], 81: ['ğŸŒ§','ä¸­é™£é›¨'], 82: ['â›ˆ','å¤§é™£é›¨'],
            95: ['â›ˆ','é›·é›¨'], 96: ['â›ˆ','é›·é›¨+å†°é›¹'], 99: ['â›ˆ','å¼·é›·é›¨']
        };

        async function fetchWeather(coords) {
            const box = document.getElementById('weather-box');
            if (!coords) { box.classList.add('hidden'); return; }
            box.classList.remove('hidden');
            document.getElementById('weather-temp').textContent = '--Â°C';
            document.getElementById('weather-desc').textContent = 'è¼‰å…¥ä¸­...';
            document.getElementById('weather-detail').textContent = '';
            document.getElementById('weather-icon').textContent = 'ğŸŒ¤';
            try {
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${coords[0]}&longitude=${coords[1]}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&timezone=Europe/Istanbul`;
                const res = await fetch(url);
                const data = await res.json();
                const c = data.current;
                const [icon, desc] = weatherCodes[c.weather_code] || ['ğŸŒ¡','--'];
                document.getElementById('weather-icon').textContent = icon;
                document.getElementById('weather-temp').textContent = Math.round(c.temperature_2m) + 'Â°C';
                document.getElementById('weather-desc').textContent = desc;
                document.getElementById('weather-detail').textContent = `ğŸ’§ ${c.relative_humidity_2m}%ã€€ğŸ’¨ ${Math.round(c.wind_speed_10m)} km/h`;
            } catch(e) {
                document.getElementById('weather-desc').textContent = 'ç„¡æ³•å–å¾—å¤©æ°£';
            }
        }

        // --- MAP ---
        let dailyMap = null;
        const brandColors = {
            migros: '#FF6600', sok: '#DAA520', a101: '#1E40AF',
            gratis: '#EC4899', watsons: '#2563EB', eczane: '#DC2626'
        };

        function renderMap(data) {
            if (dailyMap) { dailyMap.remove(); dailyMap = null; }
            const mapEl = document.getElementById('daily-map');
            if (!data.hotelCoords) {
                mapEl.innerHTML = '<div class="flex items-center justify-center h-full bg-gray-50 text-gray-400 rounded-xl">æœ¬æ—¥ç„¡åœ°åœ–é è¦½</div>';
                return;
            }
            mapEl.innerHTML = '';
            dailyMap = L.map('daily-map', { zoomControl: true, attributionControl: false })
                .setView(data.hotelCoords, 14);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 18
            }).addTo(dailyMap);

            // Hotel marker (red)
            const hotelIcon = L.divIcon({
                html: '<div style="background:#DC2626;color:white;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-size:16px;border:2px solid white;box-shadow:0 2px 6px rgba(0,0,0,0.3);">ğŸ¨</div>',
                iconSize: [32, 32], iconAnchor: [16, 16], className: ''
            });
            L.marker(data.hotelCoords, { icon: hotelIcon })
                .addTo(dailyMap)
                .bindPopup('<b>' + data.hotel + '</b><br>ä»Šæ™šä½é€™è£¡');

            // Spot markers
            const bounds = L.latLngBounds([data.hotelCoords]);
            data.spots.forEach((spot, i) => {
                if (!spot.coords) return;
                const color = spot.brand ? brandColors[spot.brand] : '#319795';
                const icon = L.divIcon({
                    html: '<div style="background:' + color + ';color:white;border-radius:50%;width:26px;height:26px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold;border:2px solid white;box-shadow:0 2px 4px rgba(0,0,0,0.3);">' + (i+1) + '</div>',
                    iconSize: [26, 26], iconAnchor: [13, 13], className: ''
                });
                L.marker(spot.coords, { icon: icon })
                    .addTo(dailyMap)
                    .bindPopup('<b>' + spot.name + '</b><br>' + spot.walkText);
                bounds.extend(spot.coords);
            });
            dailyMap.fitBounds(bounds, { padding: [30, 30], maxZoom: 15 });
        }

        function navigate(spotIndex) {
            const data = tripData[currentIndex];
            const spot = data.spots[spotIndex];
            if (!spot.mapQuery) return;
            const origin = encodeURIComponent(data.hotelAddress);
            const destination = encodeURIComponent(spot.mapQuery);
            const url = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}&travelmode=walking`;
            window.open(url, '_blank');
        }

        // Dual clock: Taiwan (UTC+8) & Turkey (UTC+3)
        function updateClocks() {
            const now = new Date();
            const twTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Taipei' }));
            const trTime = new Date(now.toLocaleString('en-US', { timeZone: 'Europe/Istanbul' }));
            const fmt = (d) => d.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
            document.getElementById('clock-tw').textContent = fmt(twTime);
            document.getElementById('clock-tr').textContent = fmt(trTime);
        }

        // Initialize app
        window.addEventListener('DOMContentLoaded', () => {
            initApp();
            updateClocks();
            setInterval(updateClocks, 1000);
        });

        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(reg => console.log('SW registered:', reg.scope))
                .catch(err => console.log('SW registration failed:', err));
        }
    </script>
</body>
</html>
